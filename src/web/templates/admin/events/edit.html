<!DOCTYPE html>
<html>

<head>
	<title>Edit Event</title>
	<link rel="stylesheet" type="text/css" href="/static/css/style.css">
	<link rel="shortcut icon" type="image/png" href="/static/png/favicon.png">
</head>

<body>

	<a class="nodecor" href="/admin/events/manage">&#8592; Return to events management panel</a>
	<h1>Edit Event</h1>
	
	<div id="event-edit-entry">
		<form id="event-edit-form">
			<label for="event-title">Title:</label><br>
			<input type="text" id="event-title" name="event-title" style="width: 32em" value="{{ title }}"><br><br>
			<label for="event-author">Author:</label><br>
			<input type="text" id="event-author" name="event-author" style="width: 16em" value="{{ author }}"><br><br>
			<label for="event-location">Location:</label><br>
			<input type="text" id="event-location" name="event-location" style="width: 16em" value="{{ room }}"><br><br>
			<label for="event-start">Start Time:</label><br>
			<input type="datetime-local" id="event-start" name="event-start"><br><br>
			<input type="hidden" id="event-timezone" name="event-timezone" value="-08:00"> <!-- Default TZ -->
			<label>Length:</label><br>
			<input type="number" min="0" id="event-duration-hours" name="event-duration-hours" style="width: 3em" value="{{ hours }}">
			<label for="event-duration-hours">h</label>
			<input type="number" min="0" max="60" id="event-duration-minutes" name="event-duration-minutes" style="width: 3em" value="{{ minutes }}">
			<label for="event-duration-minutes">m</label><br><br>
			<label for="event-points">Points:</label><br>
			<input type="number" min="0" id="event-points" name="event-points" style="width: 3em" value="{{ points }}"><br><br>
			<label for="event-weblink">(Optional) External Link:</label><br>
			<input type="text" min="0" id="event-weblink" name="event-weblink" style="width: 16em" value="{{ weblink }}"><br><br>
			<label for="event-description">Description</label><br>
			<textarea id="event-description" name="event-description" rows=4 style="width:100%">{{ description }}</textarea><br><br>
			<input type="submit" value="Submit">
		</form>
	</div>

	<div id="event-edit-preview">
		<p>Table Preview:</p>
		<table id="events-table-data" style="width: 100%">
			<tr class="table-header">
				<th style="width: 7em">Time</th>
				<th style="width: 4em">Length</th>
				<th style="width: 4em">Location</th>
				<th>Title</th>
				<th style="width: 3em">Info</th>
			</tr>
			<tr>
				<td id="event-preview-start"></td>
				<td id="event-preview-length"></td>
				<td id="event-preview-location"></td>
				<td id="event-preview-title"></td>
				<td><center><h3><a class="nodecor hovercursor">&gt;&gt;</a></h3></center></td>
			</td>
		</table>
		<br>
		<hr>
		<p>Page Preview:</p>
		<div id="event-page">
			<h1 id="event-page-title"></h1>
			<h3>by <span id="event-page-author"></span></h3>
			<h1>|</h1>
			<h3><span id="event-page-location"></span> @ <span id="event-page-start"></span></h3>
			<br>
			<p><b>Duration: <span id="event-page-duration"></span> - Reward: <span id="event-page-points"></span> points</b></p>
			<span id="event-page-weblink"></span>
			<p id="event-page-description"></p>
		</p>
	</div>

	<script src="/static/js/jquery-3.6.0.min.js"></script>
	<script src="/static/js/edit-event.js"></script>
	<script>
		let t = new Date({{ start }} * 1000);
		let yyyy = t.getFullYear();
		let MM = ("00" + t.getMonth() + 1).slice(-2);
		let dd = ("00" + t.getDate()).slice(-2);
		let hh = ("00" + t.getHours()).slice(-2);
		let mm = ("00" + t.getMinutes()).slice(-2);
		$("#event-start").val(yyyy+"-"+MM+"-"+dd+"T"+hh+":"+mm);
	</script>

</body>
